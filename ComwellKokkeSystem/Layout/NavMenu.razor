@inject NavigationManager NavManager
@inject UserState UserState
@implements IDisposable

<div class="sidebar vh-100 shadow-sm" style="width: 250px; background: linear-gradient(180deg, #003b4a 0%, #002f3a 100%);">
    <div class="px-4 py-3 border-bottom border-light">
        <h5 class="m-0 text-white fw-semibold">ComwellKokkeSystem</h5>
    </div>

    <nav class="nav flex-column mt-3 px-3">
        <NavLink class="nav-link text-white" href="" Match="NavLinkMatch.All">
            🏠 Hjem
        </NavLink>
       
        <NavLink class="nav-link text-white" href="admin/elever">
            🌦️ Elever
        </NavLink>
        <NavLink class="nav-link text-white" href="/administrator">
            🛠 Administrator
        </NavLink>
        <NavLink class="nav-link text-white" href="elevplaner">
            🛠 Elev planer
        </NavLink>
        <NavLink class="nav-link text-white" href="opret-elevplan">
            🛠 Opret Elevplan
        </NavLink>

        @if (UserState.IsLoggedIn && UserState.Role?.ToLower() == "elev")
        {
            <NavLink class="nav-link text-white" href="/elevatorblik">
                🎓 Elev Overblik
            </NavLink>
        }

        @if (!UserState.IsLoggedIn)
        {
            <NavLink class="nav-link text-white" href="/login">
                🔐 Login
            </NavLink>
        }
        else
        {
            <hr class="text-white my-3" />
            <div class="text-white small mb-2">
                Logget ind som <strong>@UserState.Username</strong> (@UserState.Role)
            </div>
            <button class="btn btn-sm btn-outline-light w-100" @onclick="Logout">Log ud</button>
        }
    </nav>

   
</div>

@code {
    protected override void OnInitialized()
    {
        UserState.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        UserState.OnChange -= StateHasChanged;
    }

    private void Logout()
    {
        UserState.Logout();
        NavManager.NavigateTo("/");
    }
}
