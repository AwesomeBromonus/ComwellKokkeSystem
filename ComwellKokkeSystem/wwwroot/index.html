<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ComwellKokkeSystem</title>
    <base href="/" />

    <!-- Til at downloade csv,excel -->
    <script src="js/download.js"></script>
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

    <!-- Bootstrap og Tailwind -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <!-- MudBlazor -->
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>

    <!-- Blazor styles -->
    <link rel="stylesheet" href="css/app.css" />
    <link rel="stylesheet" href="ComwellKokkeSystem.styles.css" />
    <link href="css/admin.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- ðŸŒŸ FIX: Loader skjules -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f5;
        }

        #app {
            visibility: hidden;
        }

        body.blazor-ready #app {
            visibility: visible;
        }

        /* Fjern tidligere Blazor loader cirkler */
        .loading-progress,
        .loading-progress-text {
            display: none !important;
        }
    </style>
</head>

<body>
    <div id="app"></div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>

    <!-- Blazor opstart -->
    <script src="_framework/blazor.webassembly.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            document.body.classList.add('blazor-ready');
        });
    </script>

    <!-- Download helpers -->
    <script>
        window.BlazorDownloadFile = (fileName, contentType, content) => {
            const byteArray = new Uint8Array(content);
            const blob = new Blob([byteArray], { type: contentType });
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);
        };

        window.downloadFileFromStream = async (filename, contentStreamReference) => {
            const arrayBuffer = await contentStreamReference.arrayBuffer();
            const blob = new Blob([arrayBuffer]);
            const url = URL.createObjectURL(blob);
            const anchor = document.createElement('a');
            anchor.href = url;
            anchor.download = filename ?? 'download.xlsx';
            anchor.click();
            anchor.remove();
            URL.revokeObjectURL(url);
        };
    </script>
</body>
</html>
